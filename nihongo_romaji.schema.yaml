# Rime schema
# encoding: utf-8

schema:
  schema_id: nihongo_romaji
  name: nihongo_romaji
  version: "0.1"
  author:
    - StarBrilliant <m13253@hotmail.com>
  description: |
    日本語ローマ字入力
  dependencies:
    - nihongo_kana

switches:
  - name: ascii_mode
    reset: 0
#    states: [ かな, 英数 ]
  - name: full_shape
    states: [ 半角, 全角 ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator
    - punct_translator
    - script_translator
    - script_translator@echo
    - script_translator@nihongo_kana
  filters:
    - uniquifier

speller:
  alphabet: "abdefghikmnoprstuvwxyzqcjlABDEFGHIKMNOPRSTUVWXYZQCJL-`.,"
  delimiter: " "
  algebra:
    - "xform/ー/q/"
    - "xform/～/`/"
    - "xform/・/\\./"
    - "xform/ゝ/,/"
    - "xform/ゞ/,/"
    - "xform/ヽ/,/"
    - "xform/ヾ/,/"
    - "xform/いぇ/ye/"
    - "xform/10/じゅう/"
    - "xform/11/じゅういち/"
    - "xform/12/じゅうに/"
    - "xform/13/じゅうさん/"
    - "xform/1/いち/"
    - "xform/2/に/"
    - "xform/3/さん/"
    - "xform/4/よん/"
    - "xform/5/ご/"
    - "xform/6/ろく/"
    - "xform/7/なな/"
    - "xform/8/はち/"
    - "xform/9/く/"
    - "xform/0/れい/"
    - "xform/うぁ/wha/"
    - "xform/うぃ/whi/"
#    - "xform/う/whu/"
    - "xform/うぇ/whe/"
    - "xform/うぉ/who/"
    - "derive/^(.+ん)(あ.*)$/$1c$2/"
    - "derive/^(.+ん)(い.*)$/$1c$2/"
    - "derive/^(.+ん)(う.*)$/$1c$2/"
    - "derive/^(.+ん)(え.*)$/$1c$2/"
    - "derive/^(.+ん)(お.*)$/$1c$2/"
    - "xform/ぁ/xa/"
    - "xform/あ/a/"
    - "xform/ぃ/xi/"
    - "xform/い/i/"
    - "xform/ぅ/xu/"
    - "xform/う/u/"
    - "xform/ぇ/xe/"
    - "xform/え/e/"
    - "xform/ぉ/xo/"
    - "xform/お/o/"
    - "xform/ヵ/xka/"
    - "xform/ヶ/xke/"
    - "xform/か/ka/"
    - "xform/が/ga/"
    - "xform/き/ki/"
    - "xform/ぎ/gi/"
    - "xform/く/ku/"
    - "xform/ぐ/gu/"
    - "xform/け/ke/"
    - "xform/げ/ge/"
    - "xform/こ/ko/"
    - "xform/ご/go/"
    - "xform/さ/sa/"
    - "xform/ざ/za/"
    - "xform/し/si/"
    - "xform/じ/zi/"
    - "xform/す/su/"
    - "xform/ず/zu/"
    - "xform/せ/se/"
    - "xform/ぜ/ze/"
    - "xform/そ/so/"
    - "xform/ぞ/zo/"
    - "xform/た/ta/"
    - "xform/だ/da/"
    - "xform/ち/ti/"
    - "xform/ぢ/di/"
    - "xform/っ/xtu/"
    - "xform/つ/tu/"
    - "xform/づ/du/"
    - "xform/て/te/"
    - "xform/で/de/"
    - "xform/と/to/"
    - "xform/ど/do/"
    - "xform/な/na/"
    - "xform/に/ni/"
    - "xform/ぬ/nu/"
    - "xform/ね/ne/"
    - "xform/の/no/"
    - "xform/は/ha/"
    - "xform/ば/ba/"
    - "xform/ぱ/pa/"
    - "xform/ひ/hi/"
    - "xform/び/bi/"
    - "xform/ぴ/pi/"
    - "xform/ふ/hu/"
    - "xform/ぶ/bu/"
    - "xform/ぷ/pu/"
    - "xform/へ/he/"
    - "xform/べ/be/"
    - "xform/ぺ/pe/"
    - "xform/ほ/ho/"
    - "xform/ぼ/bo/"
    - "xform/ぽ/po/"
    - "xform/ま/ma/"
    - "xform/み/mi/"
    - "xform/む/mu/"
    - "xform/め/me/"
    - "xform/も/mo/"
    - "xform/ゃ/xya/"
    - "xform/や/ya/"
    - "xform/ゅ/xyu/"
    - "xform/ゆ/yu/"
    - "xform/ょ/xyo/"
    - "xform/よ/yo/"
    - "xform/ら/ra/"
    - "xform/り/ri/"
    - "xform/る/ru/"
    - "xform/れ/re/"
    - "xform/ろ/ro/"
    - "xform/ゎ/xwa/"
    - "xform/わ/wa/"
    - "xform/ゐ/wi/"
    - "xform/ゑ/we/"
    - "xform/を/wo/"
    - "xform/ん/n/"
    - "xform/ゔ/vu/"
    - "xform/ゕ/xka/"
    - "xform/ゖ/xke/"
    - "xform/xtu([bdfghkmprstvwyz])/$1$1/"
    - "xform/([bdghkmnprstwyz])ixy/$1y/"
    - "xform/([bdghkmnprstwyz])ix([ie])/$1y$2"
    - "xform/([bdghkmnprstwyz])ix([aou])/$1y$2c"
    - "xform/vux([aiueoy])/v$1/"
    - "xform/hux([aiueoy])/f$1/"
    - "xform/([kgsztdbprymn])ux([aiueoyw])/$1w$2"
    - "xform/([td])ex([aiueoyw])/$1h$2"
#    - "xform/([td])ox([aiueo])/$1w$2/"
#    - "derive/x/l/"
#    - "fuzz/nc/n/"
#    - "abbrev/^nn$/n/"  #让 nihon == ni+ho+nn ，但可以防止出现 na == nn+a 的切分。 abbrev 产生的「简拼」优先级较低，存在全拼 na 的情况下，含简拼的切分 n+a 被抑制。
#    - "xlit/ZYXWVUTSRQPONMLKJIHGFEDCBA/zyxwvutsrqponmlkjihgfedcba/"

translator:
  dictionary: nihongo_romaji
  enable_sentence: true
  preedit_format:
    - "xform/ //"
#    - "xform/l/x/"
    - "xform/([kgsztdbprymn])w([aiueoy])/$1ux$2/"
    - "xform/([td])h([aiueoyw])/$1ex$2/"
#    - "xform/([td])w([aiueo])/$1ox$2/"
    - "xform/([bdfghkmprstvwyz])\\1/っ$1/"
#    - "xform/j([auo])/jixy$1/"
    - "xform/v([aieoy])/vux$1/"
    - "xform/f([aiueoy])/hux$1/"
#    - "xform/f([aieo])/fux$1/"
#    - "xform/fy([auo])/fuxy$1/"
#    - "xform/sh([auo])/sy$1/"
#    - "xform/ch([auo])/ty$1/"
    - "xform/([bdghkmnprstwyz])y([aou])c/$1ix$2/"
    - "xform/([bdghkmnprstwyz])y([ie])/$1ix$2/"
    - "xform/([bdghkmnprstwyz])y/$1ixy/"
#    - "xform/shi/si/"
#    - "xform/ji/zi/"
#    - "xform/chi/ti/"
#    - "xform/tsu/tu/"
#    - "xform/fu/hu/"
    - "xform/vu/ゔ/"
    - "xform/xka/ヵ/"
    - "xform/xke/ヶ/"
#    - "xform/xka/ゕ/"
#    - "xform/xke/ゖ/"
    - "xform/wha/うぁ/"
    - "xform/whi/うぃ/"
    - "xform/whu/う/"
    - "xform/whe/うぇ/"
    - "xform/who/うぉ/"
    - "xform/wi/ゐ/"
    - "xform/we/ゑ/"
    - "xform/ka/か/"
    - "xform/ga/が/"
    - "xform/ki/き/"
    - "xform/gi/ぎ/"
    - "xform/ku/く/"
    - "xform/gu/ぐ/"
    - "xform/ke/け/"
    - "xform/ge/げ/"
    - "xform/ko/こ/"
    - "xform/go/ご/"
    - "xform/sa/さ/"
    - "xform/za/ざ/"
    - "xform/si/し/"
    - "xform/zi/じ/"
    - "xform/su/す/"
    - "xform/zu/ず/"
    - "xform/se/せ/"
    - "xform/ze/ぜ/"
    - "xform/so/そ/"
    - "xform/zo/ぞ/"
    - "xform/ta/た/"
    - "xform/da/だ/"
    - "xform/ti/ち/"
    - "xform/di/ぢ/"
    - "xform/xtu/っ/"
    - "xform/tu/つ/"
    - "xform/du/づ/"
    - "xform/te/て/"
    - "xform/de/で/"
    - "xform/to/と/"
    - "xform/do/ど/"
    - "xform/na/な/"
    - "xform/ni/に/"
    - "xform/nu/ぬ/"
    - "xform/ne/ね/"
    - "xform/no/の/"
    - "xform/ha/は/"
    - "xform/ba/ば/"
    - "xform/pa/ぱ/"
    - "xform/hi/ひ/"
    - "xform/bi/び/"
    - "xform/pi/ぴ/"
    - "xform/hu/ふ/"
    - "xform/bu/ぶ/"
    - "xform/pu/ぷ/"
    - "xform/he/へ/"
    - "xform/be/べ/"
    - "xform/pe/ぺ/"
    - "xform/ho/ほ/"
    - "xform/bo/ぼ/"
    - "xform/po/ぽ/"
    - "xform/ma/ま/"
    - "xform/mi/み/"
    - "xform/mu/む/"
    - "xform/me/め/"
    - "xform/mo/も/"
    - "xform/xya/ゃ/"
    - "xform/ya/や/"
    - "xform/xyu/ゅ/"
    - "xform/yu/ゆ/"
    - "xform/xyo/ょ/"
    - "xform/yo/よ/"
    - "xform/ra/ら/"
    - "xform/ri/り/"
    - "xform/ru/る/"
    - "xform/re/れ/"
    - "xform/ro/ろ/"
    - "xform/xwa/ゎ/"
    - "xform/wa/わ/"
    - "xform/wo/を/"
    - "xform/nc/ん/"
    - "xform/vu/ゔ/"
    - "xform/xka/ゕ/"
    - "xform/xke/ゖ/"
    - "xform/xa/ぁ/"
    - "xform/a/あ/"
    - "xform/xi/ぃ/"
    - "xform/i/い/"
    - "xform/xu/ぅ/"
    - "xform/u/う/"
    - "xform/ye/いぇ/"
    - "xform/xe/ぇ/"
    - "xform/e/え/"
    - "xform/xo/ぉ/"
    - "xform/o/お/"
    - "xform/n/ん/"
    - "xform/\\./・/"
    - "xform/~/～/"
    - "xform/q/ー/"
    - "xform/,/ゝ/"

echo:
  dictionary: nihongo_echo
  prism: nihongo_romaji
  initial_quality: 100

nihongo_kana:
  dictionary: nihongo_kana
  enable_sentence: true
  initial_quality: 100
  preedit_format:
    - "xform/ //"
#    - "xform/l/x/"
    - "xform/([kgsztdbprymn])w([aiueoy])/$1ux$2/"
    - "xform/([td])h([aiueoyw])/$1ex$2/"
#    - "xform/([td])w([aiueo])/$1ox$2/"
    - "xform/([bdfghkmprstvwyz])\\1/っ$1/"
#    - "xform/j([auo])/jixy$1/"
    - "xform/v([aieoy])/vux$1/"
    - "xform/f([aiueoy])/hux$1/"
#    - "xform/f([aieo])/fux$1/"
#    - "xform/fy([auo])/fuxy$1/"
#    - "xform/sh([auo])/sy$1/"
#    - "xform/ch([auo])/ty$1/"
    - "xform/([bdghkmnprstwyz])y([aou])c/$1ix$2/"
    - "xform/([bdghkmnprstwyz])y([ie])/$1ix$2/"
    - "xform/([bdghkmnprstwyz])y/$1ixy/"
#    - "xform/shi/si/"
#    - "xform/ji/zi/"
#    - "xform/chi/ti/"
#    - "xform/tsu/tu/"
#    - "xform/fu/hu/"
    - "xform/vu/ゔ/"
    - "xform/xka/ヵ/"
    - "xform/xke/ヶ/"
    - "xform/xka/ゕ/"
    - "xform/xke/ゖ/"
    - "xform/wha/うぁ/"
    - "xform/whi/うぃ/"
    - "xform/whu/う/"
    - "xform/whe/うぇ/"
    - "xform/who/うぉ/"
    - "xform/wi/ゐ/"
    - "xform/we/ゑ/"
    - "xform/ka/か/"
    - "xform/ga/が/"
    - "xform/ki/き/"
    - "xform/gi/ぎ/"
    - "xform/ku/く/"
    - "xform/gu/ぐ/"
    - "xform/ke/け/"
    - "xform/ge/げ/"
    - "xform/ko/こ/"
    - "xform/go/ご/"
    - "xform/sa/さ/"
    - "xform/za/ざ/"
    - "xform/si/し/"
    - "xform/zi/じ/"
    - "xform/su/す/"
    - "xform/zu/ず/"
    - "xform/se/せ/"
    - "xform/ze/ぜ/"
    - "xform/so/そ/"
    - "xform/zo/ぞ/"
    - "xform/ta/た/"
    - "xform/da/だ/"
    - "xform/ti/ち/"
    - "xform/di/ぢ/"
    - "xform/xtu/っ/"
    - "xform/tu/つ/"
    - "xform/du/づ/"
    - "xform/te/て/"
    - "xform/de/で/"
    - "xform/to/と/"
    - "xform/do/ど/"
    - "xform/na/な/"
    - "xform/ni/に/"
    - "xform/nu/ぬ/"
    - "xform/ne/ね/"
    - "xform/no/の/"
    - "xform/ha/は/"
    - "xform/ba/ば/"
    - "xform/pa/ぱ/"
    - "xform/hi/ひ/"
    - "xform/bi/び/"
    - "xform/pi/ぴ/"
    - "xform/hu/ふ/"
    - "xform/bu/ぶ/"
    - "xform/pu/ぷ/"
    - "xform/he/へ/"
    - "xform/be/べ/"
    - "xform/pe/ぺ/"
    - "xform/ho/ほ/"
    - "xform/bo/ぼ/"
    - "xform/po/ぽ/"
    - "xform/ma/ま/"
    - "xform/mi/み/"
    - "xform/mu/む/"
    - "xform/me/め/"
    - "xform/mo/も/"
    - "xform/xya/ゃ/"
    - "xform/ya/や/"
    - "xform/xyu/ゅ/"
    - "xform/yu/ゆ/"
    - "xform/xyo/ょ/"
    - "xform/yo/よ/"
    - "xform/ra/ら/"
    - "xform/ri/り/"
    - "xform/ru/る/"
    - "xform/re/れ/"
    - "xform/ro/ろ/"
    - "xform/xwa/ゎ/"
    - "xform/wa/わ/"
    - "xform/wo/を/"
    - "xform/nc/ん/"
    - "xform/vu/ゔ/"
    - "xform/xka/ゕ/"
    - "xform/xke/ゖ/"
    - "xform/xa/ぁ/"
    - "xform/a/あ/"
    - "xform/xi/ぃ/"
    - "xform/i/い/"
    - "xform/xu/ぅ/"
    - "xform/u/う/"
    - "xform/xe/ぇ/"
    - "xform/e/え/"
    - "xform/xo/ぉ/"
    - "xform/o/お/"
    - "xform/n/ん/"
    - "xform/\\./・/"
    - "xform/ye/いぇ/"
    - "xform/~/～/"
    - "xform/q/ー/"
    - "xform/,/ゝ/"
#    - "xform/L/X/"
    - "xform/([KGSZTDBPRYMN])W([AIUEOY])/$1UX$2/"
    - "xform/([TD])H([AIUEOYW])/$1EX$2/"
#    - "xform/([TD])W([AIUEO])/$1OX$2/"
    - "xform/([BDFGHKMPRSTVWYZ])\\1/ッ$1/"
#    - "xform/J([AUO])/JIXY$1/"
    - "xform/V([AIEOY])/VUX$1/"
    - "xform/F([AIUEOY])/HUX$1/"
    - "xform/([BDGHKMNPRSTWYZ])Y([AOU])C/$1IX$2/"
    - "xform/([BDGHKMNPRSTWYZ])Y([IE])/$1IX$2/"
    - "xform/([BDGHKMNPRSTWYZ])Y/$1IXY/"
    - "xform/VU/ヴ/"
    - "xform/XKA/ヵ/"
    - "xform/XKE/ヶ/"
    - "xform/WHA/ウァ"
    - "xform/WHI/ウィ/"
    - "xform/WHU/ウ/"
    - "xform/WHE/ウェ/"
    - "xform/WHO/ウォ/"
    - "xform/WI/ヰ/"
    - "xform/WE/ヱ/"
    - "xform/KA/カ/"
    - "xform/GA/ガ/"
    - "xform/KI/キ/"
    - "xform/GI/ギ/"
    - "xform/KU/ク/"
    - "xform/GU/グ/"
    - "xform/KE/ケ/"
    - "xform/GE/ゲ/"
    - "xform/KO/コ/"
    - "xform/GO/ゴ/"
    - "xform/SA/サ/"
    - "xform/ZA/ザ/"
    - "xform/SI/シ/"
    - "xform/ZI/ジ/"
    - "xform/SU/ス/"
    - "xform/ZU/ズ/"
    - "xform/SE/セ/"
    - "xform/ZE/ゼ/"
    - "xform/SO/ソ/"
    - "xform/ZO/ゾ/"
    - "xform/TA/タ/"
    - "xform/DA/ダ/"
    - "xform/TI/チ/"
    - "xform/DI/ヂ/"
    - "xform/XTU/ッ/"
    - "xform/TU/ツ/"
    - "xform/DU/ヅ/"
    - "xform/TE/テ/"
    - "xform/DE/デ/"
    - "xform/TO/ト/"
    - "xform/DO/ド/"
    - "xform/NA/ナ/"
    - "xform/NI/ニ/"
    - "xform/NU/ヌ/"
    - "xform/NE/ネ/"
    - "xform/NO/ノ/"
    - "xform/HA/ハ/"
    - "xform/BA/バ/"
    - "xform/PA/パ/"
    - "xform/HI/ヒ/"
    - "xform/BI/ビ/"
    - "xform/PI/ピ/"
    - "xform/HU/フ/"
    - "xform/BU/ブ/"
    - "xform/PU/プ/"
    - "xform/HE/ヘ/"
    - "xform/BE/ベ/"
    - "xform/PE/ペ/"
    - "xform/HO/ホ/"
    - "xform/BO/ボ/"
    - "xform/PO/ポ/"
    - "xform/MA/マ/"
    - "xform/MI/ミ/"
    - "xform/MU/ム/"
    - "xform/ME/メ/"
    - "xform/MO/モ/"
    - "xform/XYA/ャ/"
    - "xform/YA/ヤ/"
    - "xform/XYU/ュ/"
    - "xform/YU/ユ/"
    - "xform/XYO/ョ/"
    - "xform/YO/ヨ/"
    - "xform/RA/ラ/"
    - "xform/RI/リ/"
    - "xform/RU/ル/"
    - "xform/RE/レ/"
    - "xform/RO/ロ/"
    - "xform/XWA/ヮ/"
    - "xform/WA/ワ/"
    - "xform/WO/ヲ/"
    - "xform/NC/ン/"
    - "xform/VU/ヴ/"
    - "xform/XKA/ヵ/"
    - "xform/XKE/ヶ/"
    - "xform/XA/ァ/"
    - "xform/A/ア/"
    - "xform/XI/ィ/"
    - "xform/I/イ/"
    - "xform/XU/ゥ/"
    - "xform/U/ウ/"
    - "xform/XE/ェ/"
    - "xform/E/エ/"
    - "xform/XO/ォ/"
    - "xform/O/オ/"
    - "xform/N/ン/"
    - "xform/YE/イェ/"


punctuator:
  import_preset: default

key_binder:
  import_preset: default
  bindings:
    - { when: has_menu, accept: comma, send: comma }
    - { when: has_menu, accept: period, send: period }
    - { when: has_menu, accept: minus, send: minus }
    - { when: has_menu, accept: equal, send: equal }
#    - { when: has_menu, accept: space, send: Down }
#    - { when: has_menu, accept: Return, send: space }

editor:
  bindings:
    Return: commit_script_text   #上屏變換後輸入(假名)

ascii_composer:
  good_old_caps_lock: true   ##默認輸出大寫字母。false默認小寫。
  switch_key:
    Shift_L: inline_ascii
    Shift_R: commit_code
    Caps_Lock: noop  #noop只改變大小寫。#commit_code  #西文並改變大小寫。
    Control_L: noop
    Control_R: noop

recognizer:
  import_preset: default
#  patterns:
#    punct: '^zb[a-z]*'    #symbols中有用。
